<!--
/******************************************************************************
 * Vige, Home of Professional Open Source Copyright 2010, Vige, and           *
 * individual contributors by the @authors tag. See the copyright.txt in the  *
 * distribution for a full listing of individual contributors.                *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may    *
 * not use this file except in compliance with the License. You may obtain    *
 * a copy of the License at http://www.apache.org/licenses/LICENSE-2.0        *
 * Unless required by applicable law or agreed to in writing, software        *
 * distributed under the License is distributed on an "AS IS" BASIS,          *
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.   *
 * See the License for the specific language governing permissions and        *
 * limitations under the License.                                             *
 ******************************************************************************/
-->

<div xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:forums="http://www.jboss.com/products/jbossportal/forums">

	<script language="JavaScript" type="text/javascript">
	function jump(select)
	{
		if(select.options[select.selectedIndex].value != '0')
        {
            if (select.options[select.selectedIndex].value.indexOf('forum-') == 0)
            {
                select.form.action='#{urlContext.outputLink(shared.links['forum'],true)}';
                select.options[select.selectedIndex].value=select.options[select.selectedIndex].value.substring('forum-'.length);
                select.name='f';
            }
            else 
            {
            	select.form.action='#{urlContext.outputLink(shared.links['category'],true)}';
                select.options[select.selectedIndex].value=select.options[select.selectedIndex].value.substring('category-'.length);
                select.name='c';
            }
            select.form.submit();
        }
	}
			</script>
	<form method="post" name="jumpbox"
		action="#{urlContext.outputLink(shared.links['forum'],true)}"
		onsubmit="if(document.jumpbox.identifier.value == 0){return false;}">

		${resourcebundle.Jump_to}:&#160; <select name="identifier"
			onchange="jump(this)">

			<option value="0">${resourcebundle.Select_forum}</option>

			<c:forEach items="${jumpbox.categories}" var="current_category">
				<forums:isAllowed fragment="acl://readCategory"
					contextData="#{current_category}"
					forumsACLProvider="#{forumsACLProvider}" userModule="#{userModule}">

					<option value="0"></option>
					<option value="category-${current_category.id}">${current_category.title}</option>
					<option value="0">----------------</option>

					<c:forEach items="${current_category.forums}" var="current_forum">
						<forums:isAllowed fragment="acl://readForum"
							contextData="#{current_forum}"
							forumsACLProvider="#{forumsACLProvider}"
							userModule="#{userModule}">

							<option value="forum-${current_forum.id}">${current_forum.name}</option>

						</forums:isAllowed>
					</c:forEach>

				</forums:isAllowed>
			</c:forEach>

		</select> &#160; <input type="submit" value="${resourcebundle.Go}"
			class="buttonMed" />
	</form>
</div>